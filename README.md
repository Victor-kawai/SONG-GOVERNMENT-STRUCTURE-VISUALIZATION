# SONG-GOVERNMENT-STRUCTURE-VISUALIZATION
# 流程
1. 人工：从参考书中截取待处理门类pdf片段，保存格式为“{pdf起始页数}-{pdf结束页数}{门类名}.pdf”。
2. 脚本：根据截取文档的存储位置修改 preprocess1.py 文件的 pdfPath 地址并调用脚本，完成初步的图片对半切分。
3. 人工：人工检查脚本切分效果，对切分效果不好的图片人工重新切分成左右两列。
4. 脚本：修改 preprocess2.py 的 organization（门类名）并调用脚本，完成初步的字段格式转换。
5. 人工：preprocess2.py仅完成了属性字段的格式转换，仍需人工标注 门类 及 条目，格式为 门类：“# 门类名” & 条目：“### 条目名”。
6. 人工：由于ocr准确率问题，处理过程中可以简单快速浏览检查缺字错字、缺标点错标点的情况。
7. 人工：由于参考书的属性字段标准不太统一，批量处理的“属性字段-表格字段”的映射覆盖可能不太完全，检查处理后文本的过程中相关属性字段（即“#### 属性”格式的字段）若出现脚本没有正确处理的，需人工手动处理，并在trans_format.py文件中 test_dict 补充该映射，相关格式直接参考表格文档和trans_format.py。
8. 脚本：修改paragraph_process.py的 target 和 filename_name 变量并执行脚本，完成最后的文本处理。
9. 脚本：最后修改text2table.py 的 target 和 text_file变量并执行脚本，完成文本到表格的转化。
10. 人工：上传并补充剩下的表格内容。
# 表格字段解析
- 类别：人工标注。通用字段。条目分类，目前的分类有：机构、阶官、职事官、差遣官、胥吏（后续可能会添加更多类别）、合称、别称、省称、连称。
- 条目名：脚本自动提取。通用字段。
- 衙署：人工标注。机构专用字段。部分机构存在办事官署之类的地方，如尚书省下“尚书左仆射厅，尚书右仆射厅，尚书令厅，尚书省左丞厅，尚书省右丞厅”，没有作为机构的条目列在参考资料中，但条目下文本中可能有提到。
- 下级机构：人工标注。机构专用字段。一般在机构的编制文本中可以找到，需要按不同的时期展示。
- 上级机构：人工标注。机构专用字段。一般在对应机构条目中会有说明，此外部分条目上级机构需要通过“上级机构的下级机构/编制”来发现，剩下不知道的需要留下评论。
- 隶属机构：人工标注。官职专用字段。为该官职挂靠的机构，一般会在文本中说明，或通过“隶属机构的编制”来发现，剩下不知道的需要留下评论。
- 下级官员：人工标注。官职专用字段。冗余字段，暂时先不处理。
- 平级官员：人工标注。官职专用字段。冗余字段，暂时先不处理。
- 官品文本：脚本自动提取。官职专用字段。
- 官品：人工标注。官职专用字段。官品文本中若有时期分别，需要分别提取到对应时期，若无时期分别则直接复用官品文本。
- 品级：人工标注。官职专用字段。官品中格式形如“[正/从]x品[上/下]”，中括号内的内容可能不存在。
- 编制文本：脚本自动提取。通用字段。
- 编制：人工标注。通用字段。将编制文本按时期划分。
- 官额：人工标注。通用字段。若为机构条目，则统计其对应时期的官员数目；若为官员条目（差遣官、阶官、职事官），则统计其官额，吏额字段置空。
- 吏额：人工标注。通用字段。若为机构条目，则统计其对应时期的胥吏数目；若为胥吏条目，则统计其吏额，官额字段置空。
- 职掌文本：脚本自动提取。通用字段。
- 职掌：人工标注。通用字段。将职掌文本按时期划分。
- 简称与别名：脚本自动提取。通用字段。
- 参考文档页数：脚本自动提取。通用字段。
- 职源与沿革文本：脚本自动提取。通用字段。
- 出处：人工标注。通用字段。文本中的所有出处（形如“（《*》[x之x]）”）
- 始置时间：人工标注。通用字段。每个条目在每个时期的开始时间，若“官品”、“编制”、“职掌”字段有时期划分，则需将条目按对应的时期分为多条。
- 罢置时间：人工标注。通用字段。每个条目在每个时期的结束时间，若“官品”、“编制”、“职掌”字段有时期划分，则需将条目按对应的时期分为多条。若无结束时间则置空。
- 前身：人工标注。通用字段。若文本中有提及该条目所指的机构/官职是由其他机构/官职转变而来（如更名、合并、拆分），则补充其前身的条目名。
